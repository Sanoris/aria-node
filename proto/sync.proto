syntax = "proto3";

package sync;

service AriaPeer {
  rpc SyncMemory (SyncMemoryRequest) returns (SyncAck);
}

message SyncMemoryRequest {
  string sender_id = 1;
  bytes encrypted_memory = 2;
  bytes signature = 3;
  string current_cycle_id = 4;         // New field for cycle coordination
  repeated string active_plugins = 5;  // New field for plugin status
}

message SyncAck {
  bool success = 1;
  string message = 2;
  string peer_cycle_id = 3;            // New field to echo peer's cycle ID
  repeated string peer_active_plugins = 4; // New field to echo peer's active plugins
}
